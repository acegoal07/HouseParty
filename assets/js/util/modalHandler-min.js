class ModalHandler{constructor(){this.modal=null,this.lastFocusedElement=null,this.init()}init(){window.addEventListener("load",(()=>{this.setupModalOpeners(),this.setupModalClosers(),this.setupCustomEvents()}))}open(t,e){if(this.modal||!t)return;const s=document.querySelector(t);s&&(this.lastFocusedElement=document.activeElement,document.body.classList.add("stop-scrolling"),e&&e(),this.modal=s,this.modal.style.animation="modal-open 0.4s forwards",this.modal.style.display="flex",this.trapFocus())}close(t){this.modal&&(this.modal.style.animation="modal-close 0.4s forwards",document.body.classList.remove("stop-scrolling"),setTimeout((()=>{this.modal.style.display="none",this.modal=null,t&&t(),this.lastFocusedElement&&this.lastFocusedElement.focus()}),400))}getModal(){return this.modal}setupModalOpeners(){document.body.addEventListener("click",(t=>{const e=t.target.closest(".modal-opener");if(e){const t=e.getAttribute("modal-target");this.open(`div#${t}`)}}))}setupModalClosers(){document.body.addEventListener("click",(t=>{const e=t.target.closest(".modal-closer");e&&this.modal?.contains(e)&&this.close()}))}setupCustomEvents(){document.addEventListener("openModal",(t=>{if(t.detail){const{target:e,callback:s}=t.detail;this.open(`div#${e}`,s)}else this.open(`div#${target}`)})),document.addEventListener("closeCurrentModal",(t=>{if(t.detail){const{callback:e}=t.detail;this.close(e)}else this.close()}))}trapFocus(){const t=this.modal.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])'),e=t[0],s=t[t.length-1];this.modal.addEventListener("keydown",(t=>{("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===e&&(s.focus(),t.preventDefault()):document.activeElement===s&&(e.focus(),t.preventDefault()))})),e.focus()}}const ModalHandlerInstance=new ModalHandler;